{namespace v=FluidTYPO3\Vhs\ViewHelpers}

{v:iterator.explode(content: '{data.tx_mask_product_selector}', glue: ',') -> f:variable(name: 'selectedProductsArray')}


<div class="product-link content-element {f:if(condition: '{data.tx_mask_small_checkbox} == 1', then: 'small', else: 'large')} {f:if(condition: '{data.tx_mask_active_slider} == 1', then: 'slider', else: 'no-slider')} {f:if(condition: '{data.tx_mask_render_category_selectbox}', then: 'selectbox', else: 'no-selectbox')}"
>
	
	<f:if condition="{data.header}">
		<b>
			{data.header}<br/>
		</b>
	</f:if>

	<b>Größe:</b><br/>
	<f:if condition="{data.tx_mask_small_checkbox} == 1">
		<f:then>
			Klein
		</f:then>
		<f:else>
			Groß
		</f:else>
	</f:if>
	<br/>

	<b>Slider:</b><br/>
	<f:if condition="{data.tx_mask_active_slider} == 1">
		<f:then>
			aktiviert
		</f:then>
		<f:else>
			deaktiviert
		</f:else>
	</f:if>
	<br/>

	<b>Selectbox:</b><br/>
	<f:if condition="{data.tx_mask_render_category_selectbox} == 1">
		<f:then>
			aktiviert
		</f:then>
		<f:else>
			deaktiviert
		</f:else>
	</f:if>
	<br/>

	<b>Angezeigte Produkte:</b>
	<f:for each="{products}" as="product">
		<f:for each="{selectedProductsArray}" as="selectedProduct">
			<f:if condition="{product.data.uid} == {selectedProduct}">
				{v:format.replace(substring: ',', content: '{product.data.tx_mask_product_categories}', replacement: '","') -> f:variable(name: 'product_categories_formatted')}
					{product.header}<br/>	
			</f:if>
		</f:for>
	</f:for>

</div>